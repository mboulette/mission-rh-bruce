<html>
  <body>
    <style>
      #outgoing {
        width: 600px;
        word-wrap: break-word;
      }
    </style>
    <form>
      <textarea id="incoming"></textarea>
      <button type="submit">submit</button>
    </form>

    <video id="client_video" width="640" height="360" controls></video>

    <pre id="outgoing"></pre>
    <script src="javascript\simplepeer.min.js"></script>
    <script>

    // get video/voice stream
    navigator.getUserMedia({ video: true, audio: true }, gotMedia, function () {})

    function gotMedia (stream) {
      var peer1 = new SimplePeer({ initiator: true, offerConstraints: { 
        mandatory: { 
            OfferToReceiveAudio: true, 
            OfferToReceiveVideo: true 
        } 
      }});

      var peer2 = new SimplePeer({
          initiator: false, 
          stream: stream,
          answerConstraints: { 
              mandatory: { 
                  OfferToReceiveAudio: false, 
                  OfferToReceiveVideo: false 
              } 
          }
      });

      peer1.on('signal', function (data) {
        peer2.signal(data)
      })

      peer2.on('signal', function (data) {
        peer1.signal(data)
      })

      peer1.on('stream', function (stream) {
        // got remote video stream, now let's show it in a video tag
        var video = document.querySelector('video')
        video.src = window.URL.createObjectURL(stream)
        video.play()
      })
    }

    </script>
  </body>
</html>