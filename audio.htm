<!DOCTYPE HTML> 
<html lang="en"> 
<head>
<title>PeerJS chat demo</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta http-equiv="Content-Language" content="en-us"> 

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
<script type="text/javascript" src="https://cdn.peerjs.com/0.3/peer.js"></script>
<script>

navigator.mediaDevices = navigator.mediaDevices || ((navigator.mozGetUserMedia || navigator.webkitGetUserMedia) ? {
   getUserMedia: function(c) {
     return new Promise(function(y, n) {
       (navigator.mozGetUserMedia ||
        navigator.webkitGetUserMedia).call(navigator, c, y, n);
     });
   }
} : null);


$(function() {

	if (!navigator.mediaDevices) {
	  console.log("getUserMedia() not supported.");
	  return;
	}

	// Préfère mais n'oblige pas une caméra de résolution 1280x720.

	var constraints = { audio: true, video: { width: 1280, height: 720 } };

	navigator.mediaDevices.getUserMedia(constraints)
	.then(function(stream) {
	  var video = document.querySelector('video');
	  video.src = window.URL.createObjectURL(stream);
	  video.onloadedmetadata = function(e) {
	    video.play();
	  };
	})
	.catch(function(err) {
	  console.log(err.name + ": " + error.message);
	});


});




</script>
</head> 
 
<body> 

<video width="640" height="360" controls>
</video>

</body>
</html>